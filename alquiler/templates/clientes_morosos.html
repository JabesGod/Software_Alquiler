{% extends 'base.html' %}
{% load static %}

{% block title %}Clientes Morosos{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/morosos.css' %}">
{% endblock %}

{% block content %}
    <h2><i class="fas fa-exclamation-triangle"></i> Clientes Morosos</h2>
    
    <div class="alert alert-warning">
        <i class="fas fa-info-circle"></i> Se consideran morosos los clientes con pagos pendientes por más de 15 días.
    </div>

    <ul class="lista-morosos">
        {% for cliente in clientes %}
        <li>
            <div class="moroso-header">
                <i class="fas fa-user-alt"></i> 
                <strong>{{ cliente.nombre }}</strong>
                <span class="badge-moroso">Mora: {{ cliente.dias_mora }} días</span>
            </div>
            
            <div class="moroso-details">
                <div><i class="fas fa-envelope"></i> {{ cliente.email }}</div>
                <div><i class="fas fa-phone"></i> {{ cliente.telefono }}</div>
                <div><i class="fas fa-calendar-alt"></i> Moroso desde: {{ cliente.fecha_marcado_moroso|date:"d/m/Y" }}</div>
                <div><i class="fas fa-money-bill-wave"></i> Deuda total: ${{ cliente.deuda_total|floatformat:2 }}</div>
            </div>
            
            <div class="moroso-actions">
                <a href="{% url 'alquiler:detalle_cliente' cliente.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-eye"></i> Ver detalles
                </a>
                
            </div>
        </li>
        {% empty %}
        <li class="no-morosos">
            <i class="fas fa-smile-beam"></i> No hay clientes morosos actualmente.
        </li>
        {% endfor %}
    </ul>

    <div class="volver-link">
        <a href="{% url 'alquiler:listar_clientes' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Volver 
        </a>
    </div>
{% endblock %}