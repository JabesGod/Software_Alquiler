<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>CONTRATO DE ALQUILER - TECNO NACHO S.A.S</title>
    <style type="text/css">
        /* Estilos generales */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            font-size: 10px;
            line-height: 1.3;
            color: #333;
            padding: 15px;
        }

        /* Encabezado */
        .header {
            text-align: center;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #3c7023;
        }

        .nombre-empresa {
            font-size: 14px;
            font-weight: bold;
            color: #3c7023;
            text-transform: uppercase;
        }

        .info-legal {
            font-size: 8px;
            margin: 3px 0;
        }

        /* Título principal */
        .titulo-principal {
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            color: #3c7023;
            margin: 8px 0;
            text-transform: uppercase;
        }

        /* Sección de datos */
        .seccion-datos {
            margin: 10px 0;
        }

        .tabla-datos {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 8px;
            font-size: 9px;
        }

        .tabla-datos th {
            background-color: #3c7023;
            color: white;
            padding: 5px;
            text-align: left;
            font-weight: normal;
        }

        .tabla-datos td {
            padding: 5px;
            border: 1px solid #ddd;
        }

        .tabla-datos .etiqueta {
            background-color: #f5f5f5;
            font-weight: bold;
            width: 25%;
        }

        /* Tabla de equipos */
        .tabla-equipos {
            width: 100%;
            border-collapse: collapse;
            margin: 8px 0;
            font-size: 8px;
        }

        .tabla-equipos th {
            background-color: #3c7023;
            color: white;
            padding: 5px;
            text-align: center;
            font-weight: normal;
        }

        .tabla-equipos td {
            padding: 4px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .tabla-equipos tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Cláusulas */
        .clausula {
            margin: 8px 0;
            font-size: 9px;
            text-align: justify;
        }

        .clausula-titulo {
            font-weight: bold;
            color: #3c7023;
            margin-bottom: 3px;
        }

        /* Firmas - Estilo mejorado */
        .firmas {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            page-break-inside: avoid;
        }

        .firma {
            width: 45%;
            text-align: center;
            margin-top: 20px;
        }

        .firma-img-container {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
        }

        .firma-img {
            max-height: 60px;
            max-width: 200px;
            object-fit: contain;
        }

        .linea-firma {
            border-top: 1px solid #000;
            width: 80%;
            margin: 0 auto;
            padding-top: 20px;
        }

        .nombre-firma {
            font-weight: bold;
            margin-top: 3px;
            font-size: 9px;
        }

        .cargo-firma {
            font-size: 8px;
            color: #666;
        }

        /* Términos */
        .terminos {
            margin: 10px 0;
            font-size: 8px;
            border-top: 1px solid #3c7023;
            padding-top: 5px;
        }
    </style>
</head>

<body>
    <!-- Encabezado -->
    <div class="header">
        <div class="nombre-empresa">TECNO NACHO S.A.S</div>
        <div class="info-legal">NIT: 901.067.698-7 - Calle 84 #47-30, Barranquilla</div>
        <div class="info-legal">Tel: +57 301 352 7043</div>
    </div>

    <!-- Título principal -->
    <div class="titulo-principal">CONTRATO DE ALQUILER DE EQUIPOS TECNOLÓGICOS</div>

    <!-- Datos del contrato -->
    <div class="seccion-datos">
        <table class="tabla-datos">
            <tr>
                <th colspan="4">DATOS DEL CONTRATO</th>
            </tr>
            <tr>
                <td class="etiqueta">No. Contrato:</td>
                <td>{{ alquiler.numero_factura|default:"Pendiente" }}</td>
                <td class="etiqueta">Fecha:</td>
                <td>{{ alquiler.fecha_inicio|date:"d/m/Y" }}</td>
            </tr>
        </table>

        <table class="tabla-datos">
            <tr>
                <th colspan="4">INFORMACIÓN DEL CLIENTE</th>
            </tr>
            <tr>
                <td class="etiqueta">Nombre:</td>
                <td>{{ alquiler.cliente.nombre }}</td>
                <td class="etiqueta">Documento:</td>
                <td>{{ alquiler.cliente.get_tipo_documento_display }} {{ alquiler.cliente.numero_documento }}</td>
            </tr>
            <tr>
                <td class="etiqueta">Teléfono:</td>
                <td>{{ alquiler.cliente.telefono }}</td>
                <td class="etiqueta">Email:</td>
                <td>{{ alquiler.cliente.email }}</td>
            </tr>
        </table>

        <table class="tabla-datos">
            <tr>
                <th colspan="4">DETALLES DEL ALQUILER</th>
            </tr>
            <tr>
                <td class="etiqueta">Fecha Inicio:</td>
                <td>{{ alquiler.fecha_inicio|date:"d/m/Y" }}</td>
                <td class="etiqueta">Fecha Fin:</td>
                <td>{{ alquiler.fecha_fin|date:"d/m/Y" }}</td>
            </tr>
            <tr>
                <td class="etiqueta">Valor Total:</td>
                <td colspan="3">${{ alquiler.precio_total|floatformat:0 }}</td>
            </tr>
        </table>
    </div>

    <!-- Equipos -->
    <table class="tabla-equipos">
        <thead>
            <tr>
                <th style="width: 8%;">#</th>
                <th style="width: 25%;">Equipo</th>
                <th style="width: 20%;">Marca/Modelo</th>
                <th style="width: 25%;">Número de Serie</th>
                <th style="width: 10%;">Cant.</th>
                <th style="width: 12%;">Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for detalle in alquiler.detalles.all %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ detalle.equipo.tipo_equipo }}</td>
                <td>{{ detalle.equipo.marca }} {{ detalle.equipo.modelo }}</td>
                <td>
                    {% if detalle.numeros_serie %}
                    {% for serial in detalle.numeros_serie %}
                    {{ serial }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                    {% else %}
                    N/A
                    {% endif %}
                </td>
                <td>{{ detalle.cantidad }}</td>
                <td>Óptimo</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Cláusulas principales -->
    <div class="clausula">
        <div class="clausula-titulo">PRIMERA: OBJETO</div>
        <p>EL ARRENDADOR concede a título de arrendamiento los equipos descritos en este contrato, los cuales han sido
            recibidos por EL ARRENDATARIO en perfecto estado de funcionamiento.</p>
    </div>

    <div class="clausula">
        <div class="clausula-titulo">SEGUNDA: OBLIGACIONES DEL ARRENDATARIO</div>
        <p>EL ARRENDATARIO se obliga a: (a) Conservar los equipos en óptimas condiciones; (b) Utilizarlos únicamente
            para su fin específico; (c) Devolverlos en la fecha pactada; (d) Responder por daños, pérdida o hurto.</p>
    </div>

    <div class="clausula">
        <div class="clausula-titulo">TERCERA: RESPONSABILIDADES</div>
        <p>EL ARRENDATARIO será responsable por la pérdida, daño o hurto de los equipos, debiendo asumir el costo total
            de reposición en caso de que esto ocurra.</p>
    </div>

    <!-- Sección de Firmas - Versión Mejorada -->
    <div class="flex flex-wrap justify-between items-start border-t border-base-300 pt-8 mt-10 gap-6">

        <!-- Firma del Cliente -->
        <div class="flex-1 min-w-[280px] text-center">
            <div class="border border-base-300 rounded-md p-4 shadow-md">
                <div class="h-24 flex items-center justify-center mb-4 bg-base-100">
                    {% if contrato.firma_cliente and firma_cliente_base64 %}
                    <img src="data:image/png;base64,{{ firma_cliente_base64 }}" class="max-h-20 object-contain mx-auto"
                        alt="Firma del cliente">
                    {% else %}
                    <div class="w-48 h-px bg-neutral"></div>
                    {% endif %}
                </div>
                <p class="font-bold">{{ alquiler.cliente.nombre }}</p>
                <p class="text-sm">{{ alquiler.cliente.get_tipo_documento_display }} {{ alquiler.cliente.numero_documento }}</p>
                <p class="text-sm font-semibold mt-1">EL ARRENDATARIO</p>
            </div>
        </div>

        <!-- Firma del Representante -->
        <div class="flex-1 min-w-[280px] text-center">
            <div class="border border-base-300 rounded-md p-4 shadow-md">
                <div class="h-24 flex items-center justify-center mb-4 bg-base-100">
                    {% if contrato.firma_representante and firma_representante_base64 %}
                    <img src="data:image/png;base64,{{ firma_representante_base64 }}"
                        class="max-h-20 object-contain mx-auto" alt="Firma del representante">
                    {% else %}
                    <div class="w-48 h-px bg-neutral"></div>
                    {% endif %}
                </div>
                <p class="font-bold">IGNACIO SANDOVAL RINCÓN</p>
                <p class="text-sm">C.C. 72.302.349</p>
                <p class="text-sm font-semibold mt-1">REPRESENTANTE LEGAL</p>
                <p class="text-sm">TECNO NACHO S.A.S.</p>
            </div>
        </div>

    </div>


    <!-- Términos legales -->
    <div class="terminos">
        <strong>NOTA LEGAL:</strong> Este documento constituye título ejecutivo según Art. 422 del C.G.P. En caso de
        incumplimiento y no devolución de equipos, se procederá judicialmente por HURTO ante autoridades competentes.
    </div>
</body>

</html>